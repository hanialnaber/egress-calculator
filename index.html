<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Egress & Occupant Load Calculator</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Egress & Occupant Load Calculator</h1>
            <p class="subtitle">Professional IBC-based calculations for architectural design</p>
            
            <!-- Enhanced Header Controls -->
            <div class="header-controls">
                <button id="newProjectBtn" class="header-btn">New Project</button>
                <button id="saveProjectBtn" class="header-btn">Save Project</button>
                <button id="loadProjectBtn" class="header-btn">Load Project</button>
                <button id="unitsToggle" class="header-btn">Units: <span id="currentUnits">Imperial</span></button>
                <button id="historyBtn" class="header-btn">History</button>
            </div>
        </header>

        <main>
            <!-- Input Section -->
            <section class="input-section">
                <div class="section-header">
                    <h2>Project Parameters</h2>
                    <div class="project-info">
                        <input type="text" id="projectName" placeholder="Project Name (optional)" class="project-name-input">
                        <span class="building-counter">Building <span id="currentBuilding">1</span> of <span id="totalBuildings">1</span></span>
                    </div>
                </div>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label for="state">State/Jurisdiction:</label>
                        <select id="state" required>
                            <option value="">Select State</option>
                            <option value="Texas">Texas</option>
                            <option value="Alabama">Alabama</option>
                            <option value="Alaska">Alaska</option>
                            <option value="Arizona">Arizona</option>
                            <option value="Arkansas">Arkansas</option>
                            <option value="California">California</option>
                            <option value="Colorado">Colorado</option>
                            <option value="Connecticut">Connecticut</option>
                            <option value="Delaware">Delaware</option>
                            <option value="Florida">Florida</option>
                            <option value="Georgia">Georgia</option>
                            <option value="Hawaii">Hawaii</option>
                            <option value="Idaho">Idaho</option>
                            <option value="Illinois">Illinois</option>
                            <option value="Indiana">Indiana</option>
                            <option value="Iowa">Iowa</option>
                            <option value="Kansas">Kansas</option>
                            <option value="Kentucky">Kentucky</option>
                            <option value="Louisiana">Louisiana</option>
                            <option value="Maine">Maine</option>
                            <option value="Maryland">Maryland</option>
                            <option value="Massachusetts">Massachusetts</option>
                            <option value="Michigan">Michigan</option>
                            <option value="Minnesota">Minnesota</option>
                            <option value="Mississippi">Mississippi</option>
                            <option value="Missouri">Missouri</option>
                            <option value="Montana">Montana</option>
                            <option value="Nebraska">Nebraska</option>
                            <option value="Nevada">Nevada</option>
                            <option value="New Hampshire">New Hampshire</option>
                            <option value="New Jersey">New Jersey</option>
                            <option value="New Mexico">New Mexico</option>
                            <option value="New York">New York</option>
                            <option value="North Carolina">North Carolina</option>
                            <option value="North Dakota">North Dakota</option>
                            <option value="Ohio">Ohio</option>
                            <option value="Oklahoma">Oklahoma</option>
                            <option value="Oregon">Oregon</option>
                            <option value="Pennsylvania">Pennsylvania</option>
                            <option value="Rhode Island">Rhode Island</option>
                            <option value="South Carolina">South Carolina</option>
                            <option value="South Dakota">South Dakota</option>
                            <option value="Tennessee">Tennessee</option>
                            <option value="Utah">Utah</option>
                            <option value="Vermont">Vermont</option>
                            <option value="Virginia">Virginia</option>
                            <option value="Washington">Washington</option>
                            <option value="West Virginia">West Virginia</option>
                            <option value="Wisconsin">Wisconsin</option>
                            <option value="Wyoming">Wyoming</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="ibcVersion">IBC Code Version:</label>
                        <select id="ibcVersion" required>
                            <option value="">Select Version</option>
                            <option value="2021">2021</option>
                            <option value="2018">2018</option>
                            <option value="2015">2015</option>
                            <option value="2012">2012</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="occupancy">Occupancy Classification:</label>
                        <select id="occupancy" required>
                            <option value="">Select Occupancy</option>
                            <option value="Assembly (Less Concentrated)">Assembly (Less Concentrated)</option>
                            <option value="Assembly (Standing Space)">Assembly (Standing Space)</option>
                            <option value="Business">Business</option>
                            <option value="Educational">Educational</option>
                            <option value="Mercantile">Mercantile</option>
                            <option value="Residential">Residential</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="floorArea">Floor Area (<span id="areaUnits">sq. ft.</span>): <span id="areaType" class="area-type"></span></label>
                        <input type="number" id="floorArea" min="1" step="0.01" required>
                        <div class="input-help" id="areaHelp"></div>
                    </div>

                    <div class="form-group">
                        <label for="sprinkler">Automatic Sprinkler System:</label>
                        <select id="sprinkler" required>
                            <option value="">Select Option</option>
                            <option value="yes">Yes</option>
                            <option value="no">No</option>
                        </select>
                    </div>

                    <!-- Advanced Options -->
                    <div class="form-group advanced-options">
                        <label for="travelDistance">Max Travel Distance (<span id="distanceUnits">ft</span>):</label>
                        <input type="number" id="travelDistance" min="1" step="1" placeholder="Optional - for door calculations">
                        <div class="input-help">Used for minimum door width calculations</div>
                    </div>

                    <div class="form-group advanced-options">
                        <label for="exitDoors">Number of Exit Doors:</label>
                        <input type="number" id="exitDoors" min="1" step="1" value="2" placeholder="2">
                        <div class="input-help">Minimum 2 exits required for most occupancies</div>
                    </div>
                </div>

                <div class="button-group">
                    <button id="calculateBtn" class="calculate-btn">Calculate Egress Requirements</button>
                    <button id="addBuildingBtn" class="secondary-btn">Add Another Building</button>
                    <button id="advancedToggle" class="secondary-btn">Show Advanced Options</button>
                </div>
            </section>

            <!-- Results Section -->
            <section id="resultsSection" class="results-section hidden">
                <div class="section-header">
                    <h2>Calculation Results</h2>
                    <div class="results-actions">
                        <button id="printBtn" class="action-btn">ðŸ“„ Print Report</button>
                        <button id="exportBtn" class="action-btn">ðŸ’¾ Export PDF</button>
                        <button id="copyBtn" class="action-btn">ðŸ“‹ Copy Results</button>
                    </div>
                </div>
                
                <div class="results-grid">
                    <div class="result-item">
                        <label>Calculated Occupant Load:</label>
                        <span id="occupantLoad" class="result-value"></span>
                    </div>
                    
                    <div class="result-item">
                        <label>Required Minimum Egress Width (Stairs):</label>
                        <span id="stairWidth" class="result-value"></span>
                    </div>
                    
                    <div class="result-item">
                        <label>Required Minimum Egress Width (Other Components):</label>
                        <span id="otherWidth" class="result-value"></span>
                    </div>

                    <div class="result-item" id="doorWidthResult">
                        <label>Minimum Door Width (per door):</label>
                        <span id="doorWidth" class="result-value"></span>
                    </div>

                    <div class="result-item" id="totalWidthResult">
                        <label>Total Required Exit Width:</label>
                        <span id="totalWidth" class="result-value"></span>
                    </div>
                </div>

                <!-- Code References -->
                <div class="code-references">
                    <h3>ðŸ“– Relevant IBC Sections</h3>
                    <div id="codeReferences" class="code-refs-list"></div>
                </div>

                <div id="codeNotice" class="code-notice"></div>

                <!-- Calculation Summary -->
                <div class="calculation-summary">
                    <h3>ðŸ“Š Calculation Summary</h3>
                    <div id="calcSummary" class="calc-details"></div>
                </div>
            </section>
        </main>

        <!-- Modal for History -->
        <div id="historyModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>ðŸ“ˆ Calculation History</h3>
                    <button id="closeHistoryBtn" class="close-btn">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="historyList" class="history-list"></div>
                    <button id="clearHistoryBtn" class="secondary-btn">Clear History</button>
                </div>
            </div>
        </div>

        <!-- Modal for Project Load -->
        <div id="loadModal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>ðŸ“‚ Load Project</h3>
                    <button id="closeLoadBtn" class="close-btn">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="savedProjects" class="saved-projects-list"></div>
                    <div class="file-upload">
                        <label for="fileInput">Or upload project file:</label>
                        <input type="file" id="fileInput" accept=".json,.txt" class="file-input">
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p class="disclaimer">
                <strong>Disclaimer:</strong> This calculator is for preliminary design purposes only. 
                Always consult with local authorities and verify current code requirements before finalizing any design.
            </p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>
